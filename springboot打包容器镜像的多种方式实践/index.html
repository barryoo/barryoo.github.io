<!doctype html><html lang=en-US><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://barryoo.github.io/favicon.ico><title>springBoot打包容器镜像的多种方式实践 | Barry Blog</title>
<meta name=title content="springBoot打包容器镜像的多种方式实践"><meta name=description content="方式一. maven docker各自运作 使用maven打包为可执行jar包. 编写Dockerfile, 复制jar, 运行jar包. 方式二. maven docker各自运行, 手动分层 使用maven打包为可执行jar包. 解压缩jar包, 并放置到不同层目录中. mkdir -p target/dependency && (cd target/dependency; jar -xf ../*.jar) 编写Dockerfile, 复制各层的文件, 运行main方法. FROM beevelop/java:latest COPY target/dependency/BOOT-INF/lib /app/lib COPY target/dependency/META-INF /app/META-INF COPY target/dependency/BOOT-INF/classes /app ENTRYPOINT [&#34;java&#34;,&#34;-cp&#34;,&#34;app:app/lib/*&#34;,&#34;com.example.springbootdocker.SpringBootDockerApplication&#34;] 方式三. 在maven执行打包容器镜像. pom.xml中配置容器参数 执行mvn spring-boot:build-image打包. 如果配置了registry, 会自动push 可在pom.xml中配置容器参数. 可在mvn 命令中传入容器参数. docker运行时, 可以通过-e传递springboot运行参数.例如: docker run -e &#34;SPRING_PROFILES_ACTIVE=prod&#34; -p 8080:8080 -t springio/gs-spring-boot-docker
方式四. 在maven执行打包容器镜像, 自动分层. 在spring-boot-maven-plugin中配置layers参数. 本质上只是打包时,添加了一个layers.idx文件.
<build> <plugins> <plugin> <groupId>org.springframework.boot</groupId> <artifactId>spring-boot-maven-plugin</artifactId> <configuration> <layers> <enabled>true</enabled> </layers> </configuration> </plugin> </plugins> </build> 实践建议 spring-boot的spring-boot-maven-plugin使用了buildpacker来进行构建镜像, 无需做任何配置, 是最简单的方式, 但是由于国内网络,导致buildpacker相关组件无法下载, 所以该方式不能正常使用."><meta name=keywords content="spring,云原生,"><meta property="og:title" content="springBoot打包容器镜像的多种方式实践"><meta property="og:description" content="方式一. maven docker各自运作 使用maven打包为可执行jar包. 编写Dockerfile, 复制jar, 运行jar包. 方式二. maven docker各自运行, 手动分层 使用maven打包为可执行jar包. 解压缩jar包, 并放置到不同层目录中. mkdir -p target/dependency && (cd target/dependency; jar -xf ../*.jar) 编写Dockerfile, 复制各层的文件, 运行main方法. FROM beevelop/java:latest COPY target/dependency/BOOT-INF/lib /app/lib COPY target/dependency/META-INF /app/META-INF COPY target/dependency/BOOT-INF/classes /app ENTRYPOINT [&#34;java&#34;,&#34;-cp&#34;,&#34;app:app/lib/*&#34;,&#34;com.example.springbootdocker.SpringBootDockerApplication&#34;] 方式三. 在maven执行打包容器镜像. pom.xml中配置容器参数 执行mvn spring-boot:build-image打包. 如果配置了registry, 会自动push 可在pom.xml中配置容器参数. 可在mvn 命令中传入容器参数. docker运行时, 可以通过-e传递springboot运行参数.例如: docker run -e &#34;SPRING_PROFILES_ACTIVE=prod&#34; -p 8080:8080 -t springio/gs-spring-boot-docker
方式四. 在maven执行打包容器镜像, 自动分层. 在spring-boot-maven-plugin中配置layers参数. 本质上只是打包时,添加了一个layers.idx文件.
<build> <plugins> <plugin> <groupId>org.springframework.boot</groupId> <artifactId>spring-boot-maven-plugin</artifactId> <configuration> <layers> <enabled>true</enabled> </layers> </configuration> </plugin> </plugins> </build> 实践建议 spring-boot的spring-boot-maven-plugin使用了buildpacker来进行构建镜像, 无需做任何配置, 是最简单的方式, 但是由于国内网络,导致buildpacker相关组件无法下载, 所以该方式不能正常使用."><meta property="og:type" content="article"><meta property="og:url" content="https://barryoo.github.io/springboot%E6%89%93%E5%8C%85%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F%E7%9A%84%E5%A4%9A%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%AE%9E%E8%B7%B5/"><meta property="og:image" content="https://barryoo.github.io/images/share.png"><meta property="article:section" content="blog"><meta property="article:published_time" content="2022-01-10T00:00:00+00:00"><meta property="article:modified_time" content="2022-01-10T00:00:00+00:00"><meta property="og:site_name" content="barry blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://barryoo.github.io/images/share.png"><meta name=twitter:title content="springBoot打包容器镜像的多种方式实践"><meta name=twitter:description content="方式一. maven docker各自运作 使用maven打包为可执行jar包. 编写Dockerfile, 复制jar, 运行jar包. 方式二. maven docker各自运行, 手动分层 使用maven打包为可执行jar包. 解压缩jar包, 并放置到不同层目录中. mkdir -p target/dependency && (cd target/dependency; jar -xf ../*.jar) 编写Dockerfile, 复制各层的文件, 运行main方法. FROM beevelop/java:latest COPY target/dependency/BOOT-INF/lib /app/lib COPY target/dependency/META-INF /app/META-INF COPY target/dependency/BOOT-INF/classes /app ENTRYPOINT [&#34;java&#34;,&#34;-cp&#34;,&#34;app:app/lib/*&#34;,&#34;com.example.springbootdocker.SpringBootDockerApplication&#34;] 方式三. 在maven执行打包容器镜像. pom.xml中配置容器参数 执行mvn spring-boot:build-image打包. 如果配置了registry, 会自动push 可在pom.xml中配置容器参数. 可在mvn 命令中传入容器参数. docker运行时, 可以通过-e传递springboot运行参数.例如: docker run -e &#34;SPRING_PROFILES_ACTIVE=prod&#34; -p 8080:8080 -t springio/gs-spring-boot-docker
方式四. 在maven执行打包容器镜像, 自动分层. 在spring-boot-maven-plugin中配置layers参数. 本质上只是打包时,添加了一个layers.idx文件.
<build> <plugins> <plugin> <groupId>org.springframework.boot</groupId> <artifactId>spring-boot-maven-plugin</artifactId> <configuration> <layers> <enabled>true</enabled> </layers> </configuration> </plugin> </plugins> </build> 实践建议 spring-boot的spring-boot-maven-plugin使用了buildpacker来进行构建镜像, 无需做任何配置, 是最简单的方式, 但是由于国内网络,导致buildpacker相关组件无法下载, 所以该方式不能正常使用."><meta itemprop=name content="springBoot打包容器镜像的多种方式实践"><meta itemprop=description content="方式一. maven docker各自运作 使用maven打包为可执行jar包. 编写Dockerfile, 复制jar, 运行jar包. 方式二. maven docker各自运行, 手动分层 使用maven打包为可执行jar包. 解压缩jar包, 并放置到不同层目录中. mkdir -p target/dependency && (cd target/dependency; jar -xf ../*.jar) 编写Dockerfile, 复制各层的文件, 运行main方法. FROM beevelop/java:latest COPY target/dependency/BOOT-INF/lib /app/lib COPY target/dependency/META-INF /app/META-INF COPY target/dependency/BOOT-INF/classes /app ENTRYPOINT [&#34;java&#34;,&#34;-cp&#34;,&#34;app:app/lib/*&#34;,&#34;com.example.springbootdocker.SpringBootDockerApplication&#34;] 方式三. 在maven执行打包容器镜像. pom.xml中配置容器参数 执行mvn spring-boot:build-image打包. 如果配置了registry, 会自动push 可在pom.xml中配置容器参数. 可在mvn 命令中传入容器参数. docker运行时, 可以通过-e传递springboot运行参数.例如: docker run -e &#34;SPRING_PROFILES_ACTIVE=prod&#34; -p 8080:8080 -t springio/gs-spring-boot-docker
方式四. 在maven执行打包容器镜像, 自动分层. 在spring-boot-maven-plugin中配置layers参数. 本质上只是打包时,添加了一个layers.idx文件.
<build> <plugins> <plugin> <groupId>org.springframework.boot</groupId> <artifactId>spring-boot-maven-plugin</artifactId> <configuration> <layers> <enabled>true</enabled> </layers> </configuration> </plugin> </plugins> </build> 实践建议 spring-boot的spring-boot-maven-plugin使用了buildpacker来进行构建镜像, 无需做任何配置, 是最简单的方式, 但是由于国内网络,导致buildpacker相关组件无法下载, 所以该方式不能正常使用."><meta itemprop=datePublished content="2022-01-10T00:00:00+00:00"><meta itemprop=dateModified content="2022-01-10T00:00:00+00:00"><meta itemprop=wordCount content="188"><meta itemprop=image content="https://barryoo.github.io/images/share.png"><meta itemprop=keywords content="spring,云原生,"><meta name=referrer content="no-referrer-when-downgrade"><style>html{scroll-behavior:smooth}body{font-family:Verdana,sans-serif;margin:auto;padding:20px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}header{margin:auto;text-align:center;max-width:720px}.menu{justify-content:space-between;display:flex}main{margin:0 auto}.blog-posts-container{width:fit-content;margin:auto}.tag-container{max-width:720px}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0;text-align:center;color:#000;font-size:25px}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}.toc{max-width:250px;width:auto;top:20%;position:fixed;font-size:13px}.toc a{color:rgba(128,128,128,.4);text-decoration:none;display:block}.toc a:hover{color:#777}article{max-width:1080px;margin:0 auto;margin-left:calc(max((100% - 1080px)/2,250px))}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px;overflow-x:auto}div.highlight pre{background-color:initial;color:initial}div.highlight code{background-color:unset;color:unset}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li span{margin-right:30px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}@media only screen and (max-width:1020px){.toc{width:auto;position:relative}article{padding-left:0;margin:0 auto}}</style></head><body><header><nav class=menu><a id=siteTitle href=/ class=title>Barry Blog</a><div style=display:flex><a href=/>Home</a>
<a href=https://github.com/barryOO>github</a>
<a href=/blog/>Blog</a></div></nav></header><main><aside class=toc><a href=#siteTitle style=margin-left:40px>top</a><nav id=TableOfContents><ul><li><a href=#方式一-maven-docker各自运作>方式一. maven docker各自运作</a></li><li><a href=#方式二-maven-docker各自运行-手动分层>方式二. maven docker各自运行, 手动分层</a></li><li><a href=#方式三-在maven执行打包容器镜像>方式三. 在maven执行打包容器镜像.</a></li><li><a href=#方式四-在maven执行打包容器镜像-自动分层>方式四. 在maven执行打包容器镜像, 自动分层.</a></li><li><a href=#实践建议>实践建议</a></li><li><a href=#可用于java打包的多种方案>可用于java打包的多种方案</a></li><li><a href=#jib>Jib</a></li></ul></nav></aside><article><h1 style=font-size:40px>springBoot打包容器镜像的多种方式实践</h1><p><i><time datetime=2022-01-10 pubdate>10 Jan, 2022</time></i></p><p><a href=https://barryoo.github.io/blog/spring/>#spring</a>
<a href=https://barryoo.github.io/blog/%E4%BA%91%E5%8E%9F%E7%94%9F/>#云原生</a></p><content><h2 id=方式一-maven-docker各自运作>方式一. maven docker各自运作</h2><ol><li>使用maven打包为可执行jar包.</li><li>编写Dockerfile, <code>复制jar, 运行jar包</code>.</li></ol><h2 id=方式二-maven-docker各自运行-手动分层>方式二. maven docker各自运行, 手动分层</h2><ol><li>使用maven打包为可执行jar包.</li><li>解压缩jar包, 并放置到不同层目录中.
<code>mkdir -p target/dependency && (cd target/dependency; jar -xf ../*.jar)</code></li><li>编写Dockerfile, 复制各层的文件, 运行main方法.<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> beevelop/java:latest</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> target/dependency/BOOT-INF/lib /app/lib<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> target/dependency/META-INF /app/META-INF<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> target/dependency/BOOT-INF/classes /app<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>ENTRYPOINT</span> [<span style=color:#e6db74>&#34;java&#34;</span>,<span style=color:#e6db74>&#34;-cp&#34;</span>,<span style=color:#e6db74>&#34;app:app/lib/*&#34;</span>,<span style=color:#e6db74>&#34;com.example.springbootdocker.SpringBootDockerApplication&#34;</span>]<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div></li></ol><h2 id=方式三-在maven执行打包容器镜像>方式三. 在maven执行打包容器镜像.</h2><ol><li>pom.xml中配置容器参数</li><li>执行<code>mvn spring-boot:build-image</code>打包.</li><li>如果配置了registry, 会自动push
可在pom.xml中配置容器参数.
可在mvn 命令中传入容器参数.</li></ol><p>docker运行时, 可以通过<code>-e</code>传递springboot运行参数.例如:
<code>docker run -e "SPRING_PROFILES_ACTIVE=prod" -p 8080:8080 -t springio/gs-spring-boot-docker</code></p><h2 id=方式四-在maven执行打包容器镜像-自动分层>方式四. 在maven执行打包容器镜像, 自动分层.</h2><p>在spring-boot-maven-plugin中配置layers参数. 本质上只是打包时,添加了一个layers.idx文件.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span>	<span style=color:#f92672>&lt;build&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;plugins&gt;</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>&lt;plugin&gt;</span>
</span></span><span style=display:flex><span>				<span style=color:#f92672>&lt;groupId&gt;</span>org.springframework.boot<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>				<span style=color:#f92672>&lt;artifactId&gt;</span>spring-boot-maven-plugin<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&lt;layers&gt;</span>
</span></span><span style=display:flex><span>                        <span style=color:#f92672>&lt;enabled&gt;</span>true<span style=color:#f92672>&lt;/enabled&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&lt;/layers&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;/configuration&gt;</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>&lt;/plugin&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;/plugins&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;/build&gt;</span>
</span></span></code></pre></div><h2 id=实践建议>实践建议</h2><p>spring-boot的<code>spring-boot-maven-plugin</code>使用了buildpacker来进行构建镜像, 无需做任何配置, 是最简单的方式, 但是由于国内网络,导致buildpacker相关组件无法下载, 所以该方式不能正常使用.
建议构建流程如下:</p><ol><li>通过spring-boot的分层工具, 定义分层.</li><li>mvn package 打出jar包</li><li>使用spring-boot分层工具,解包.</li><li>在Dockerfile中分别复制每层</li></ol><p>自定义分层</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;layers</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/boot/layers&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/boot/layers
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                          https://www.springframework.org/schema/boot/layers/layers-2.7.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;application&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;into</span> <span style=color:#a6e22e>layer=</span><span style=color:#e6db74>&#34;spring-boot-loader&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;include&gt;</span>org/springframework/boot/loader/**<span style=color:#f92672>&lt;/include&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/into&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;into</span> <span style=color:#a6e22e>layer=</span><span style=color:#e6db74>&#34;application&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/application&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;into</span> <span style=color:#a6e22e>layer=</span><span style=color:#e6db74>&#34;snapshot-dependencies&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;include&gt;</span>*:*:*SNAPSHOT<span style=color:#f92672>&lt;/include&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/into&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;into</span> <span style=color:#a6e22e>layer=</span><span style=color:#e6db74>&#34;company-dependencies&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;include&gt;</span>com.bizmatics:*<span style=color:#f92672>&lt;/include&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/into&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;into</span> <span style=color:#a6e22e>layer=</span><span style=color:#e6db74>&#34;dependencies&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;layerOrder&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;layer&gt;</span>dependencies<span style=color:#f92672>&lt;/layer&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;layer&gt;</span>spring-boot-loader<span style=color:#f92672>&lt;/layer&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;layer&gt;</span>snapshot-dependencies<span style=color:#f92672>&lt;/layer&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;layer&gt;</span>company-dependencies<span style=color:#f92672>&lt;/layer&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;layer&gt;</span>application<span style=color:#f92672>&lt;/layer&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/layerOrder&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/layers&gt;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span>...<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>...<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># 解包</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> mkdir -p helloworld-controller/target/extracted <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>(</span>java -Djarmode<span style=color:#f92672>=</span>layertools -jar helloworld-controller/target/*.jar extract --destination helloworld-controller/target/extracted<span style=color:#f92672>)</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># 复制</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>ARG</span> EXTRACTED<span style=color:#f92672>=</span>/workspace/app/helloworld-controller/target/extracted<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> --from<span style=color:#f92672>=</span>build <span style=color:#e6db74>${</span>EXTRACTED<span style=color:#e6db74>}</span>/dependencies/ ./<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> --from<span style=color:#f92672>=</span>build <span style=color:#e6db74>${</span>EXTRACTED<span style=color:#e6db74>}</span>/spring-boot-loader/ ./<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> --from<span style=color:#f92672>=</span>build <span style=color:#e6db74>${</span>EXTRACTED<span style=color:#e6db74>}</span>/company-dependencies/ ./<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> --from<span style=color:#f92672>=</span>build <span style=color:#e6db74>${</span>EXTRACTED<span style=color:#e6db74>}</span>/snapshot-dependencies/ ./<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> --from<span style=color:#f92672>=</span>build <span style=color:#e6db74>${</span>EXTRACTED<span style=color:#e6db74>}</span>/application/ ./<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># 运行</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>ENTRYPOINT</span> [<span style=color:#e6db74>&#34;java&#34;</span>,<span style=color:#e6db74>&#34;org.springframework.boot.loader.JarLauncher&#34;</span>]<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h2 id=可用于java打包的多种方案>可用于java打包的多种方案</h2><ul><li>Cloud Native Buildpacks（Spring Boot 2.3+ 版本开始支持）</li><li>Google 的 jib-maven-plugin</li><li>fabric8 和 spotify 的 docker-maven-plugin</li></ul><h2 id=jib>Jib</h2><p>使用宿主机进行build, 然后使用Dockerfile构建镜像.</p></content></article></main><footer></footer></body></html>